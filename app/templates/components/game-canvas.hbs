<canvas id='game' class="{{if aChallengeIsActive "active-challenge"}}" width={{width}} height='600'>
  Your browser doesn't support this game. :(
</canvas>

{{#if isLoading}}
  {{game-canvas-components/progress-bar}}
{{/if}}

{{#if (if-equals currentScene 'stageSelection') }}
  {{game-canvas-components/scenes/stage-selection
      Q=Q
      me=me
      gameState=gameState}}
{{/if}}

{{#if (if-equals currentScene 'mainMenu') }}
  {{game-canvas-components/scenes/main-menu
      me=me
      gameState=gameState
      startStageAction=(action "startStage")
      selectStageAction=(action "selectStage")
      openBuyEnergyDialogAction=(action "openBuyEnergyDialog")}}
{{/if}}

{{#if (if-equals currentScene 'gameOver') }}
  {{game-canvas-components/scenes/game-over
      me=me
      newScore=newScore
      tryAgainAction=(action "startStage")
      selectStageAction=(action "selectStage")
      openBuyEnergyDialogAction=(action "openBuyEnergyDialog")}}
{{/if}}

{{#if showHud}}
  {{game-canvas-components/hud
      me=me
      newScore=newScore
      gameState=gameState}}
{{/if}}
